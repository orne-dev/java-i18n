<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/markdown/configuration.md at 2024-10-12
 | Rendered using Apache Maven Fluido Skin 1.12.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>Orne I18N &#x2013; Configuration</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.12.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.12.0.min.js"></script>
<script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10.4.0/dist/mermaid.esm.min.mjs';
      mermaid.init({ startOnLoad: true });
      document.querySelectorAll('.language-mermaid').forEach(s => s.parentElement.classList.remove("prettyprint"));
      await mermaid.run({
        querySelector: '.language-mermaid',
        suppressErrors: true,
      });
    </script>
  </head>
  <body>
    <a class="github-fork-ribbon right-top" href="https://github.com/orne-dev/java-i18n" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1>Orne I18N</h1>
</div>
</div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2024-10-12<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 0.1.0</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="resources.html" title="I18N Resources"><span class="none"></span>I18N Resources</a></li>
    <li><a href="strings.html" title="I18N Strings"><span class="none"></span>I18N Strings</a></li>
    <li class="active"><a><span class="none"></span>Configuration</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<h1>Configuration</h1>
<p>When the library is used without any additional configuration a
configuration suitable for standalone applications is applied by default.</p><section>
<h2><a name="File_based_configuration"></a>File based configuration</h2>
<p>As a preferred alternative, configuration file based method is provided: Add a
<code>dev.orne.i18n.config.properties</code> file in the class path resources
with the configuration options.</p>

<div class="source"><pre class="prettyprint"><code># If context should be thread exclusive or shared among threads. Allows SHARED, THREAD. Defaults to THREAD.
dev.orne.i18n.context.provider=THREAD
# If context is inherited by child threads in per-thread context providers. Defaults to true.
dev.orne.i18n.context.inherited=true
# The default application language. Defaults to Locale.getDefault().
dev.orne.i18n.language.default=en
# The languages supported by the application. Optional, not used internally. Defaults to Locale.getAvailableLocales().
dev.orne.i18n.language.available=bn,en,es,hi,zh
# The default I18N resources bundle. Defaults to &quot;messages&quot;.
dev.orne.i18n.resources=messages
# Additional alternative named I18N resources bundles. Optional. In this example exposed as &quot;errors&quot;.
dev.orne.i18n.resources.named.errors=error-messages
</code></pre></div>
<p>The configuration file takes effect for the class loader that provides it and
all child class loaders that don't provide a new configuration file.
This is specially usefull for J2EE evironments, where different WARS packed in
a single EAR can provide different configurations while other threads using the
EAR's class loader (executors threads, for example) use the shared EAR-level
configuration.</p>
<p>Multiple configuration files in a single class loader are not allowed and
throw an exception.</p>
<p>Support for custom context providers can be added registering implementations
of <code>dev.orne.i18n.context.I18nContextProviderFactory</code> through Java SPI.</p></section><section>
<h2><a name="Programmatic_configuration"></a>Programmatic configuration</h2>
<p>To change the I18N configuration or context provider programmatically a class
implementing the interface <code>I18nContextProvider.Configurer</code> can call
<code>setI18nConfiguration()</code> to override the configuration or
<code>setI18nContextProvider()</code> to set a fully configured context provider instance:</p>

<div class="source"><pre class="prettyprint"><code class="language-java">class I18nConfigurer implements I18nContextProvider.Configurer {

    void configureI18n() {
        // Set configuration (do not use 'dev.orne.i18n.config.properties' file)
        setI18nConfiguration(config);

        // and/or

        // Configure context provider
        I18nContextProvider provider = ...;
        // Register for this thread and child threads
        setI18nContextProvider(provider);
    }
}
</code></pre></div></section><section>
<h2><a name="Spring_configuration"></a>Spring configuration</h2>
<p>In Spring based applications just add <code>EnableI18N</code> annotation to Spring
context configuration. This anotation will link de I18N context to Spring
<code>LocaleContextHolder</code>, use application's default <code>MessageSource</code> as default
I18N resources source and, if <code>spring-web</code> is in the classpath, register a
listener of Spring's <code>RequestHandledEvent</code> events to clear I18N context
between HTTP requests.</p>

<div class="source"><pre class="prettyprint"><code class="language-java">@Configuration
@EnableI18N
class SpringConfig {
    // Application beans configuration
}
</code></pre></div>
<p>On applications with Spring contexts hierarchies property <code>classLoader</code> can
be set to provide a class of the class loader being configured. This allows
I18N configuration EAR wide,</p>

<div class="source"><pre class="prettyprint"><code class="language-java">@Configuration
@EnableI18N(classLoader = EarSpringConfig.class)
class EarSpringConfig {
    // Configures shared I18N provider for all WARs and EJBs
}

@Configuration
@EnableI18N
class War1SpringConfig {
    // Configures custom I18N configuration for this WAR
}

@Configuration
class War2SpringConfig {
    // Uses shared I18N provider
}
</code></pre></div>
<p>Additional configuration can be applied implementing the <code>I18nSpringConfigurer</code>
interface.
For example, to extract context configuation from application provided
properties:</p>

<div class="source"><pre class="prettyprint"><code class="language-java">@Configuration
@EnableI18N
class SpringConfig implements I18nSpringConfigurer {

    @Bean
    public Properties applicationConfiguration() {
        ...
    }

    @Override
    public void configureI18nContextProvider(
            @NotNull I18nSpringContextProvider.Builder builder) {
        // Default implementation
        builder.configure(applicationConfiguration());
    }
}
</code></pre></div></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>©      2021–2024
<a href="https://github.com/orne-dev">Orne Developments</a>
</p>
        </div>
      </div>
    </footer>
<script>
  if(anchors) {
    anchors.add();
  }
</script>
  </body>
</html>